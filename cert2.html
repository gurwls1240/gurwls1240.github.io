<!DOCTYPE html>
<html>
<head>
<title>EDU Block Certification</title>
</head>
<body>
<div style="border: 10px double #14bdee; padding: 50px 30px 40px 30px; margin: 0px auto 10px auto; text-align: center; font-family: Helvetica, Arial, sans-serif; width: 800px;">
		<div class="logo"><img src="images/3video.png"></div>
		<p style="font-family: 'Times New Roman', serif; font-size: 33px; font-weight: bold; color: #14bdee !important; margin: 35px;">EDU Block Certificate</p>
		<p style="font-size: 16px;">To: <strong>[User Account]</strong></p>
		<p style="font-size: 16px;" font-style:italic;>Specifies the certificate is issued to [User Account] for EDU BLOCK.</p>
		
 
		<hr style="margin: 20px 20px 20px 20px; border: double; color: #14bdee; height: 4px;">
 
		<h3>Thank you for using Edu block to learn and teach
	<ul>        
	<li><a href="index2.html"> 동영상이나 스터디 타이틀 넣을거임 </a></li>
		<li><a href="index2.html"> 동영상이나 스터디 타이틀 넣을거임 </a></li>
		<li><a href="index2.html"> 동영상이나 스터디 타이틀 넣을거임</a></li>
			<li><a href="index2.html"> 동영상이나 스터디 타이틀 넣을거임 </a></li>
			<li><a href="index2.html"> 동영상이나 스터디 타이틀 넣을거임</a> </li>
				<li><a href="index2.html"> 동영상이나 스터디 타이틀 넣을거임 </a></li>
				<li><a href="index2.html"> 동영상이나 스터디 타이틀 넣을거임</a> </li>
				<li><a href="index2.html"> 동영상이나 스터디 타이틀 넣을거임 </a></li>
					<li><a href="index2.html"> 동영상이나 스터디 타이틀 넣을거임</a> </li>
					<li><a href="index2.html"> 동영상이나 스터디 타이틀 넣을거임 </a></li>
					<li><a href="index2.html"> 동영상이나 스터디 타이틀 넣을거임</a> </li>
					  <li><a href="index2.html"> 동영상이나 스터디 타이틀 넣을거임 </a></li>
				          <li><a href="index2.html"> 동영상이나 스터디 타이틀 넣을거임</a> </li>
					  <li><a href="index2.html"> 동영상이나 스터디 타이틀 넣을거임</a> </li>					
		</ul>
	</h3>
		<h2>위의 사실을 증명합니다.</h2>
		<p>This certificate is proved by EduBlock. All Rights Reserved. Copyright by Edublock.</p>		
	</div>
  
  
  </body>
	
<script src="https://cdn.rawgit.com/ethereum/web3.js/develop/dist/web3.js"></script>
<!-- script src="https://code.jquery.com/jquery-3.1.1.slim.min.js"></script -->
	<script src="js/jquery-3.2.1.min.js"></script>
<script src="styles/bootstrap4/popper.js"></script>
<script src="styles/bootstrap4/bootstrap.min.js"></script>
<script src="plugins/greensock/TweenMax.min.js"></script>
<script src="plugins/greensock/TimelineMax.min.js"></script>
<script src="plugins/scrollmagic/ScrollMagic.min.js"></script>
<script src="plugins/greensock/animation.gsap.min.js"></script>
<script src="plugins/greensock/ScrollToPlugin.min.js"></script>
<script src="plugins/OwlCarousel2-2.2.1/owl.carousel.js"></script>
<script src="plugins/easing/easing.js"></script>
<script src="plugins/parallax-js-master/parallax.min.js"></script>
<script src="js/custom.js"></script>		
<script>
var contractAddress = '0x4e6a56fce0149154d2319b5b2eabd36d309b49a4';
	var abi = [ { "constant": true, "inputs": [ { "name": "_index", "type": "uint256" } ], "name": "getStudyList2", "outputs": [ { "name": "", "type": "string" } ], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "getMyLecture", "outputs": [], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [ { "name": "_day", "type": "uint256" }, { "name": "_month", "type": "string" }, { "name": "_studytitle", "type": "string" }, { "name": "_sodyd", "type": "string" }, { "name": "_studyclocka", "type": "string" }, { "name": "_map", "type": "string" } ], "name": "uploadStudy", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [], "name": "getMyClass", "outputs": [], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [ { "name": "_key", "type": "bytes32" } ], "name": "insertLecture", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [ { "name": "_name", "type": "string" } ], "name": "createPerson", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [ { "name": "_key", "type": "bytes32" } ], "name": "checkMyCourse", "outputs": [ { "name": "", "type": "bool" } ], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [ { "name": "_key", "type": "bytes32" } ], "name": "getVideo", "outputs": [ { "name": "", "type": "string" } ], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [ { "name": "_key", "type": "bytes32" } ], "name": "getReviewNum", "outputs": [ { "name": "", "type": "uint256" } ], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "getVideoNum", "outputs": [ { "name": "", "type": "uint256" } ], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [ { "name": "_video", "type": "string" }, { "name": "_category", "type": "string" }, { "name": "_title", "type": "string" }, { "name": "_summary", "type": "string" }, { "name": "_price", "type": "uint16" } ], "name": "uploadVideo", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [], "name": "getPersonNum", "outputs": [ { "name": "", "type": "uint256" } ], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [ { "name": "_key", "type": "bytes32" }, { "name": "_index", "type": "uint256" } ], "name": "getReview", "outputs": [ { "name": "", "type": "uint256" }, { "name": "", "type": "string" } ], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [ { "name": "_key", "type": "bytes32" } ], "name": "getVideoDetail", "outputs": [ { "name": "", "type": "string" }, { "name": "", "type": "string" }, { "name": "", "type": "string" }, { "name": "", "type": "string" }, { "name": "", "type": "uint256" }, { "name": "", "type": "uint256" }, { "name": "", "type": "address" } ], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [ { "name": "_index", "type": "uint256" } ], "name": "getVideoList", "outputs": [ { "name": "", "type": "bytes32" }, { "name": "", "type": "string" }, { "name": "", "type": "string" }, { "name": "", "type": "string" }, { "name": "", "type": "uint256" }, { "name": "", "type": "uint256" } ], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [ { "name": "_add", "type": "address" } ], "name": "getTeacherTotal", "outputs": [ { "name": "", "type": "uint256" }, { "name": "", "type": "uint256" } ], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [ { "name": "_index", "type": "uint256" } ], "name": "getStudyList", "outputs": [ { "name": "", "type": "string" }, { "name": "", "type": "uint256" }, { "name": "", "type": "string" }, { "name": "", "type": "string" }, { "name": "", "type": "string" }, { "name": "", "type": "string" } ], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [ { "name": "_key", "type": "bytes32" } ], "name": "payForCourse", "outputs": [ { "name": "", "type": "address" }, { "name": "", "type": "uint256" } ], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "getStudyNum", "outputs": [ { "name": "", "type": "uint256" } ], "payable": false, "stateMutability": "view", "type": "function" } ];
	var EDBContract;
	var EDB;
	
	window.addEventListener('load', function() {

	// Checking if Web3 has been injected by the browser (Mist/MetaMask)
		if (typeof web3 !== 'undefined') {
			// Use Mist/MetaMask's provider
			window.web3 = new Web3(web3.currentProvider);
		} else {
			console.log('No web3? You should consider trying MetaMask!')
			// fallback - use your fallback strategy (local node / hosted node + in-dapp id mgmt / fail)
			window.web3 = new Web3(new Web3.providers.HttpProvider("https://ropsten.infura.io/v3/ae6f0ffba6464191af24a26af5d50df1"));
		}
	// Now you can start your app & access web3 freely:
	startApp();
	});
	
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	
	function startApp() {
		EDBContract = web3.eth.contract(abi);
		EDB = EDBContract.at(contractAddress);
		getvideoValue();
        getstudyValue();
		getValue();
	}

	function getValue(){
		$("#milestones").append($('<div class="milestone"> </div> <div class="milestone">'));
		
		EDB.getStudyNum(function(e,r){
			$("#milestones").append($('<div class="milestone"> <div class="milestone_counter" data-end-value="'+ r +'">'+ r +'</div> <div class="milestone_text">스터디 갯수</div> </div>'));
		});
		
		EDB.getVideoNum(function(e,r){
			$("#milestones").append($('<div class="milestone"> <div class="milestone_counter" data-end-value="'+ r +'">'+ r +'</div> <div class="milestone_text">교육 동영상 갯수</div> </div>'));
		});
			
		EDB.getPersonNum(function(e,r){ 
			$("#milestones").append($('<div class="milestone"> <div class="milestone_counter" data-end-value="'+ r +'">'+ r +'</div> <div class="milestone_text">회원 수</div> </div>'));
		});
	}

	function getvideoValue() {
		$("#showCourses").empty();

		EDB.getVideoNum(function(e,r){
			for(a = r-1; a > r-4; a--){
				if(a==-1) break;
				EDB.getVideoList(a, function(e,r){
					$("#showCourses").append($('<div class="col-lg-4 course_col"> <div class="course"> <div class="course_image"><img src="images/course_1.jpg" alt=""></div> <div class="course_body"> <h3 class="course_title"><a href="javascript:viewDetail(\'' + r[0] +'\')" >'+ r[2] +'</a></h3> <div class="course_teacher">'+ r[1] +'</div> <div class="course_text"> <p>'+ r[3] +'</p> </div> </div> <div class="course_footer"> <div class="course_footer_content d-flex flex-row align-items-center justify-content-start"> <div class="course_info"> <i class="fa fa-graduation-cap" aria-hidden="true"></i> <span>'+ r[5] +'</span> </div> <div class="course_info"> <i class="fa fa-star" aria-hidden="true"></i> <span>'+ 0 +' Ratings</span> </div> <div class="course_price ml-auto">EDB '+ r[4] +'</div> </div> </div> </div> </div>'))
				});
			}
		});
	}
  
  function getstudyValue() {
		$("#showStudies").empty();

		EDB.getStudyNum(function(e,r){
			for(a = r-1; a > r-4; a--){
				if(a==-1) break;
				else getStudy(a);
					
			}
		});
	}

	function getStudy(a){
		EDB.getStudyList(a, function(e,r){
			$("#showStudies").append($('<div class="col-lg-4 event_col"><div class="event event_left"><div class="event_image"><img src="images/event_1.jpg" alt=""></div><div class="event_body d-flex flex-row align-items-start justify-content-start"><div class="event_date"><div class="d-flex flex-column align-items-center justify-content-center trans_200"><div class="event_day trans_200">'+r[1]+'</div> <div class="event_month trans_200">'+r[2]+'</div></div></div><div class="event_content"><div class="event_title"><a href="javascript:viewBlog(\'' + a +'\')" >'+ r[3] +'</a></div><div class="event_info_container"><div class="event_info"><i class="fa fa-clock-o" aria-hidden="true"></i><span>'+r[4]+'</span></div><div class="event_info"><i class="fa fa-map-marker" aria-hidden="true"></i><span>'+r[5]+'</span></div></div></div></div></div></div>'))
		}); 
	}

	function setName(){
		var newName = document.getElementById('myName').value;
		var txid;

		EDB.createPerson(newName, function(e,r){
			//트랜잭션 보내면 그거 보여주는걸 해야하나..... 그냥 안보여줘도 되나?
			//document.getElementById('resultName').innerHTML = 'Transaction id: ' + r + '<span id="pendingName" style="color:red;">(Pending)</span>';
			txid = r;
		});

		var filter = web3.eth.filter('latest');
		filter.watch(function(e, r) {
			web3.eth.getTransaction(txid, function(e,r){
				if (r != null && r.blockNumber > 0) {
					document.getElementById('myName').value = "";
					window.location = "index.html";
					filter.stopWatching();
				}
			});
		});
		
	}

	function viewDetail(obj){
		window.location = "course.html?" + obj;
	}

	function viewBlog(obj){
		window.location = "blog_single.html?" + obj;
	}
	
	
</script>	
	
  </html>
